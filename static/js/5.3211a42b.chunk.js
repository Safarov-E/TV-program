(this["webpackJsonptv-app"]=this["webpackJsonptv-app"]||[]).push([[5],{51:function(t,e,n){},52:function(t,e,n){"use strict";n.r(e);var a=n(13),r=n(14),c=n(16),i=n(15),s=n(0),o=n(24),u=n(10);function l(t){var e=new Date,n=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();return function(e){fetch("http://epg.domru.ru/program/list?domain=perm&date_from=".concat(n,"+00%3A00%3A00&date_to=").concat(n,"+23%3A55%3A00&xvid=").concat(t)).then((function(t){if(!t.ok)throw new Error(t.statusText);return t})).then((function(t){return t.json()})).then((function(t){return e(function(t){return{type:u.c,payload:t}}(t))}))}}var p=n(25),h=(n(51),n(2)),m=function(t){Object(c.a)(n,t);var e=Object(i.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"componentDidMount",value:function(){console.log("componentDidMount()"),this.props.fetchData(this.props.match.params.xvid)}},{key:"render",value:function(){var t=this.props,e=t.channels,n=t.loading,a=t.match;return Object(h.jsx)("div",{className:"tv-programm__chanels-item",children:Object(h.jsx)("div",{className:"tv-programm__channel",children:Object(h.jsx)("ul",{children:n||"undefined"===typeof e[a.params.xvid]?Object(h.jsx)(p.a,{}):e[this.props.match.params.xvid].map((function(t,e){var n=new Date(t.start),a=+t.duration,r=n.getHours(),c=n.getMinutes(),i=r<10?"0"+r:r,s=c<10?"0"+c:c,o=(new Date).getTime()/1e3,u=n.getTime()/1e3,l=u+a,p=100/a*(o-u);return Object(h.jsxs)("li",{children:[Object(h.jsxs)("div",{className:"program__list-link",children:[Object(h.jsxs)("span",{children:[i,":",s]}),Object(h.jsx)("p",{children:t.title})]}),o>=u&&o<=l?Object(h.jsx)("div",{className:"program__list-item-progress",children:Object(h.jsx)("div",{className:"program__list-item-progress-bar",style:{width:"".concat(p,"%")}})}):null]},e)}))})})})}}]),n}(s.Component),d=Object(o.b)((function(t){return{channels:t.channelListItem.channelListItem,loading:t.channelListItem.loading}}),(function(t){return{fetchData:function(e){return t(l(e))}}}))(m);e.default=d}}]);
//# sourceMappingURL=5.3211a42b.chunk.js.map